# 14 Jan 2020

## Latching solenoid valve for irrigation control

*   Common solenoid valves require a 24VDC supply, and (say) 100mA holding current to stay on. They are relatively cheap (about AU$21 at Bunnings).
*   Latching solenoid valves can use much less power because they only need a brief pulse to switch from one state to another (on or off). They tend to be more expensive, though: [Cheapest non-junk I could find](https://www.amazon.com.au/gp/product/B07JLYZB75/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1) was AU$35.
*   9V battery discharge rates is [tricky](https://www.powerstream.com/9V-Alkaline-tests.htm) but suggests that it becomes exponentially bad for high currents.
*   Specs for [my latching solenoid](https://www.powerstream.com/9V-Alkaline-tests.htm): 6–12VDC; 3/4&Prime; (&approx;19mm) male BSP threaded on both ends; not sure about pulse current or any other specs yet, though.
*   [Info on how latching solenoids work](https://www.tlxtech.com/uploads/pdf/Understanding-Latching-Solenoid-Presentation.pdf).
*   Latching pulse width is typically 20–50mS?
*   I intend to switch with 9V, or something close to it. Anything at 6V or above should do.
*   Not sure what the pulse current will be, but I've seen various numbers: 300mA, 333mA, 1A, 3A. It depends on the resistance of the coil, and the respective voltage I guess. At a guess, from looking at [other datasheets](http://www.china-fuxin.com/en/product_info.asp?sid=38&cpid=0&id=458), a 6–12V coil might be about 20&ohm;, so at 6V it needs 300mA?
*   If we assume 2A pulses of 50mS, but two required per occasion (on, then off) that's 2000mA &times; 0.1S = 200mAS, and divided by 3600 seconds gives 0.0556mAh. At a discharge rate of 2A, a 9V battery drains much faster. It might fall below 6V after discharging about 20mAh, but this still works out to 20 &div; 0.0556 = 360 on/off cycles, or about 1 year. In fact, since the pulse is so brief, it might get better performance than this? We still need to factor in the ESP8266 though and loss resulting from its voltage regulator. [ESP8266 light sleep](https://www.losant.com/blog/making-the-esp8266-low-powered-with-deep-sleep) supposedly uses only about 0.4mA, while Deep Sleep uses about 0.02mA. Since this is a very small drain on the 9V battery, it might deliver more like 100mAh, and if we factor in some losses we should be able to get about 140 days. A 6V torch battery would blow this all out of the water, incidentally :)
*   Discussion about latching solenoid with Arduino, [here](https://community.particle.io/t/help-with-latching-solenoid-valve/42469).
*   Do I already have any [L293D H-Bridge Motor Driver ICs](https://www.adafruit.com/product/807) or could I pull them from other boards/shields that I have? Alternatively I can [make an H-Bridge](https://www.researchgate.net/figure/Latching-valves-motor-control-H-bridge-circuit_fig2_224114814). I've ordered [Darlington transistors](https://www.ebay.com.au/itm/5-10-20-50-100PCS-TIP120-120-NPN-Darlington-Transistors-TO-220/302129932228?ssPageName=STRK%3AMEBIDX%3AIT&_trksid=p2057872.m2749.l2649) and [MOSFETs](https://www.ebay.com.au/itm/10pcs-FQP30N06L-FQP-30N06L-60V-LOGIC-N-Channel-MOSFET-TO-220SE/132767536403?ssPageName=STRK%3AMEBIDX%3AIT&_trksid=p2057872.m2749.l2649).
*   Other interesting info: https://electronics.stackexchange.com/questions/456025/how-to-trigger-a-latch-solenoid-valve-from-an-arduino
