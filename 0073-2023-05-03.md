# 3 May 2023

## Raybox next steps

*   Camera movement can now be driven by sim, but rotation doesn't work very well.
    *   Is this a quantisation/precision problem due to Q12.12? Does Q16.16 fix it?
    *   Does slicing the viewplane into 256 steps per side lead to cumulative rounding errors?
    *   Can we fix it by using a higher-precision/magnitude camera step and then post-scaling?
    *   NOTE: My calculated `gOvers` are stored as doubles the whole time, so when we draw them onto the SDL screen we're not seeing them as the DUT would see them.
        Change this to overlay with ACTUAL (fixed-point-converted) values => Test fixed-point in sim instead of doubles.
    *   I also have started to notice X/Y axiom glitches when using rotation (i.e. purple columns). May need to look at that saturation logic again.
    *   Keep working on FP in raybox-app, too. I think I'm close to having that working.
*   Got an issue where latest version (with fixed map grid boundary glitch) doesn't work properly on FPGA.
    This could be due to Q12.12, or changed `lzc`, or other changes that were made to fix the Qm.n parametric support, or...?
*   Find the last commit where it worked on FPGA. [0071-2023-05-01.md](./0071-2023-05-01.md) describes it working on the DE0-Nano with Q16.16, and wall edge glitch fixed.
    That would place it at commit [`9f90eaa`](https://github.com/algofoogle/raybox/commit/9f90eaacf36cd570768db4671596c5f70f85460e).
*   Check whether changes to bit depth caused the problem
*   Try Q16.16 on FPGA again
*   Cherry-pick some stuff for FPGA in another branch?
*   Try changing `lzc` back to `casez` -- in fact I'm working on making 4 different implementations (`lzc_a`..`_d`) to try them all out.
*   Create VGA test output for `lzc` and `reciprocal`
*   Optimise `lzc` based on LIKELY input values. For instance, we won't normally have more than 8 M bits?? 

## Other notes

*   Find out more to do with SONOS and sky130. See [this](https://isn.ucsd.edu/courses/beng207/lectures/Tim_Edwards_2021_slides.pdf) and see if we can find the actual lecture.
*   Check out psychogenic's moodle alpha.
