# 17 Jan 2024

| Previous journal: | Next journal: |
|-|-|
| [**0189**-2023-12-11.md](./0189-2023-12-11.md) | *Next journal TBA* |

It's been 4 weeks since my last update. From that time I have some things I need to come back and document, including:
*   QFN breakout board design
*   Pawel's fixed test for HyperRAM
*   Prep for TT03p5 bring-up
*   GFMPW-0 chips coming from Tholin

# PCB assembly with JLC PCB

I've been working on a simple RP2040 board to get experience in JLCPCB's PCBA (PCB Assembly) service.

Board design is informed by the [RP2040 hardware design guide](https://datasheets.raspberrypi.com/rp2040/hardware-design-with-rp2040.pdf).

![RP2040 assembled PCB design/render](./i/0190-rp2040-pcb.jpg)

The board is a little untidy but hopefully electrically valid. Some of the untidiness is because this is just a test anyway, and I also wanted to try out a few things to see what would happenw ith JLCPCB.

Reminders about some things that I needed to do:
*   While JLCPCB's parts business is LCSC.com, you need to use https://jlcpcb.com/parts to search for parts that are actually available for the assembly service.
*   'Basic' parts have no setup fee, while 'Extended' parts do. Prefer basic parts where possible.
*   Needed to set the origin for drills and placement. I put this in the middle of the RP2040 (as did the reference design). Would the board corner be better?
*   USB-Micro-B mounting I used is a through-hole variant, which may incur extra cost. This is good for strength, but would a fully-SMD version be cheaper?
*   I had to alter the KiCad 7 QFN-56 default footprint assigned to RP2040 to make it more suitable: EP (External Pad) needed an array of 9 vias, and thus solder paste rectanges needed adjusting.
*   There were 3 remaining DRC warnings about thermal relief spokes, but I think this is just because the zones themselves didn't have enough spokes, while extra traces I added should make up for this (as the reference design did).
*   Not sure if the signal traces are OK for the SPI ROM: one side are long, and all are tightly-packed. Possible coupling issue?
*   While the reference design used a crystal with the RP2040's internal oscillator, I opted for an actual XO. This was for the sake of being different, but also because the 27pF caps are a JLCPCB Extended part, so there is not much of a price benefit to just using an XTAL.
*   1mm board thickness has been selected for impedance matching of the USB data lines. This might be more expensive with JLCPCB though... I might risk it with 1.2mm instead.
*   I had an issue with some footprints using 3D models that were outdated: They referred to KiCad 6 paths, and the respective model files no longer existed. I found alternatives for 2 of the 3 parts affected.
*   Using the Schematic Editor's table (bulk edit) for component properties sped up a lot of stuff.

This is the JLCPCB guide I'll try using to generate the BOM and placement (CPL aka Centroid) files: [How to generate the BOM and Centroid file from KiCAD](https://jlcpcb.com/help/article/81-How-to-generate-the-BOM-and-Centroid-file-from-KiCAD)

My guide:
*   I've already added the `LCSC` property for all parts that require assembly.
*   [Add tooling holes](https://jlcpcb.com/help/article/47-How-to-add-tooling-holes-for-PCB-assembly-order)
*   ...TBC...

Things to beware:
*   Proper footprint matching
*   Confirm all components to place
*   Correct orientation esp. with 'dot'
*   Diode orientation: "DFM ANALYSE" looking for `+/-` markings and IC dots? JLC [recommend](https://jlcpcb.com/help/article/39-pcb-assembly-faqs-part-2#:~:text=How%20do%20we%20judge%20the%20polarity%20for%20the%20components) silkscreen markings, but are these irrelevant given a CPL?
*   Check [minimum component spacing](https://jlcpcb.com/help/article/41-SMD-Components-Minimum-Spacing)
*   Check coupons!
*   JLCPCB [list of basic parts and extended parts that do not incur extra cost in 'Economy' assembly service](https://jlcpcb.com/parts/basic_parts)
