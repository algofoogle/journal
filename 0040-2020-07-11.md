# 11 Jul 2020

I started on [`t08e`](https://github.com/algofoogle/sandpit/tree/master/fpga/XC9572XL/test08/t08e) which was going to be a simple progressive way to show evolution of the design with cleaner code. I had in mind that I might make a few videos about it. However, the first commit is already confusing because it has some optimisations in it that make it hard to understand.

I think I will hence start again as `t08f`.

While working on that I learned about iMPACT batch files. I made [`t08e_impact.cmd`](https://github.com/algofoogle/sandpit/tree/master/fpga/XC9572XL/test08/t08e/t08e_impact.cmd) which can be run like this:

```bash
impact -batch t08e_impact.cmd
```

I've adapted this so it can be run more conveniently:

1.  I created [`x.sh`](https://github.com/algofoogle/sandpit/blob/master/fpga/XC9572XL/x.sh) which can be used to build an impact batch file and run it within the XISE VM.
2.  In the VM, I symlinked it in `~`:
    ```bash
    cd ~
    ln -s shared_projects/sandpit/fpga/XC9572XL/x.sh
    ```
3.  I created a quick-access Terminal by going to the `Applications` menu right at the top, going to `System Tools`, right-clicking `Terminal`, and selecting `Add this launcher to panel`.
4.  Click the Terminal icon from the top of the screen, and now we can build an XSVF for (say) `t08e` by doing:
    ```
    $ ./x.sh 08e

    ~/shared_projects/sandpit/fpga/XC9572XL/test08/t08e ~
    Running impact...
    OK
    -rwxrwx---. 1 root vboxsf 53289 [2020-07-11_04:10:42] output/test08e.xsvf
    b6763b6436581ad09b79b4ab91571852  output/test08e.xsvf
    ```
    If the impact script didn't already exist, it will have created it for us.

NOTE:
*   The (generated) impact script can also be run directly, within the project directory, e.g.:
    ```bash
    cd ~/shared_projects/sandpit/fpga/XC9572XL/test08/t08e
    ./t08e_impact.cmd
    ```
    ...but it won't show the additional output that `x.sh` gives (e.g. resulting file timestamp and md5sum).
*   `impact` generates log output, which when run via `x.sh` will be captured to a file named `log_t???_impact.cmd.log` based on the project name.

More info on iMPACT and its batch commands here:
*   http://web.ee.nchu.edu.tw/~cpfan/FY92a-baseband/iMPACT-guide.pdf
*   https://www.xilinx.com/support/documentation/sw_manuals/xilinx11/pim_n_alphabetical_batchmode_commands.htm

